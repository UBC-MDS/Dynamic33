---
title: "Vancouver Tree Height Geography Analysis"
author: "DSCI 522, Group 33"
date: "`r Sys.Date()`"
format: 
  pdf:
    toc: true        # Enables the table of contents
    toc-depth: 3     # Sets depth for the table of contents
    code-fold: false # Ensures no code is folded
bibliography: references.bib
nocite: '@*'
---

```{r setup, include=FALSE, echo=FALSE}
# Load required libraries
library(tidyverse)
library(knitr)
```

```bash
Rscript scripts/00_download_data.R "https://opendata.vancouver.ca/api/explore/v2.1/catalog/datasets/street-trees/exports/csv?lang=en&timezone=America%2FLos_Angeles&use_labels=true&delimiter=%3B" "data/street-trees.csv"
```

```bash
Rscript scripts/01_validate_data.R "data/street-trees.csv"
```

```bash
Rscript scripts/02_eda.R "data/street-trees.csv" "results/figures/heatmap.png" "results/tables/contingency_table.csv" "results/tables/level_table.csv"
```

```bash
Rscript scripts/03_stat_analysis.R "results/tables/contingency_table.csv" "results/models/chi_squared_results.rds"
```

```bash
quarto render report/test-with-bib.qmd --to pdf
```

```{r load_heatmap, echo=FALSE}
heatmap_path <- "../results/figures/heatmap.png"
knitr::include_graphics(heatmap_path)
```

See Figure @ref(fig:load_heatmap).

```{r load_contingency_table, echo=FALSE}
cont_table <- read_csv("../results/tables/contingency_table.csv")
knitr::kable(cont_table, caption = "Contingency Table")
```

Refer to Table @ref(tab:load_contingency_table).

```{r load_chi_squared, echo=FALSE}
chisq_results <- readRDS("../results/models/chi_squared_results.rds")
```

The Chi-squared test result yielded a statistic of `r chisq_results$statistic` with a p-value of `r chisq_results$p.value`.

## References